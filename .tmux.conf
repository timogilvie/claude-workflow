# Track activity and bells
set -g monitor-activity on
set -g monitor-bell on

# Visual indicators in status bar
set -g visual-activity on
set -g visual-bell on

# Style for windows needing attention
set -g window-status-activity-style fg=yellow,bold
set -g window-status-bell-style fg=red,bold

# Key binding to jump to next window with activity or bell
bind-key -n C-g run-shell '
  target=$(tmux list-windows -F "#{window_index} #{window_bell_flag} #{window_activity_flag}" \
    | awk "$2 == 1 {print $1; exit}");
  if [ -z "$target" ]; then
    target=$(tmux list-windows -F "#{window_index} #{window_activity_flag}" \
      | awk "$2 == 1 {print $1; exit}");
  fi
  [ -n "$target" ] && tmux select-window -t $target
'
